databaseChangeLog:
  - changeSet:
      id: 004-create-reference-tables
      author: cursor-agent
      changes:
        - createTable:
            tableName: sectors
            remarks: "Market sectors (e.g. Финансы, Энергетика)"
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(100)
                  constraints:
                    nullable: false
                    unique: true
        - createTable:
            tableName: boards
            remarks: "Trading boards (e.g. TQBR, TQTF)"
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: board_code
                  type: VARCHAR(10)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: description
                  type: VARCHAR(255)
        - createTable:
            tableName: currencies
            remarks: "Currency reference (e.g. RUB, USD)"
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: code
                  type: VARCHAR(3)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: name
                  type: VARCHAR(50)
                  constraints:
                    nullable: false
        - createTable:
            tableName: industries
            remarks: "Industries, linked to sectors"
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(100)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: sector_id
                  type: BIGINT
                  constraints:
                    nullable: false
        - addForeignKeyConstraint:
            baseTableName: industries
            baseColumnNames: sector_id
            constraintName: fk_industries_sector
            referencedTableName: sectors
            referencedColumnNames: id
            onDelete: CASCADE

